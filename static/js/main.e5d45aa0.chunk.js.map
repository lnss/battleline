{"version":3,"sources":["Game.js","BoardComponents.js","Board.js","Lobby.js","App.js","serviceWorker.js","index.js"],"names":["DEFAULT_TROOP_DECK","TROOP_DECK_COLORS","TROOP_DECK_VALUES","VALUE_MAP","Map","FORMATION_STRENGTH_MAP","i","j","card","push","troop_deck","slice","shuffle_array","tactics_deck","player_hands","pop","board_cards","Array","fill","unseen_cards","flag_statuses","BattleLine","name","setup","minPlayers","maxPlayers","moves","playCard","G","ctx","flag","numMoves","INVALID_MOVE","currentPlayer","length","ind","indexOf","splice","claimFlag","formations","player_id","formation","formation_opp","parseInt","getFormations","remaining_cards","Set","k","delete","formation_strength","formation_sum","formationSum","is_flush","isFlush","is_straight","isStraight","is_set","isSet","formationStrength","formation_strength_opp","pot","potentialStraightFlush","formation_new","unseen_cards_new","potentialSet","potentialFlush","potentialStraight","potentialSum","potentialFormationStrength","formation_strength1","formation_strength2","get","isStrongestFormation","drawCard","move","deck","events","endTurn","client","playerView","playerID","troop_deck_stripped","tactics_deck_stripped","player_hands_stripped","opp_hand_stripped","stripSecrets","endIf","count","count_consecutive","IsVictory","winner","sum","color","diff","Math","abs","value","arr","floor","random","temp","COLOR_MAP","Card","this","updateCanvas","refs","canvas","getContext","clearRect","props","str","drawTroopCardFront","drawCardOutline","fillStyle","fillRect","card_width","card_height","font","textAlign","fillText","drawTroopCardBack","ref","width","height","React","Component","Formation","side","translate","cards","show_flag","drawFlag","Flag","card_str","val","lineHeight","measureText","padding","width_1","width_0","reduce_spacing","lineWidth","beginPath","moveTo","lineTo","stroke","rotate","PI","corner_radius","fill_color","strokeStyle","arcTo","closePath","y_offset","img","document","getElementById","drawImage","BattleLineBoard","selected_card","card_id","flag_id","deck_id","tbody","cells","key","style","onClick","onClickCard","rowSpan","id","margin","onClickDeck","join","onClickSlot","onClickFlag","BattleLineLobby","event","setState","playerName","target","_createRoom","_updateConnection","gameID","_joinRoom","_leaveRoom","_enterLobby","state","_exitLobby","_startGame","numPlayers","_exitRoom","rooms_thead","rooms_th","room_id_col_style","player_name_col_style","vs_col_style","button_col_style","type","handleNewRoom","handleRefreshRooms","rooms_tbody","rooms_row","room","connection","rooms","player1_name","players","undefined","player2_name","handleJoinRoom","handleLeaveRoom","handleStartGame","phase","onChange","handleChangeName","handleEnterLobby","handleExitLobby","board_element","createElement","runningGame","app","credentials","handleExitRoom","Lobby","App","Client","game","board","multiplayer","SocketIO","server","gameServer","lobbyServer","gameComponents","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.e5d45aa0.chunk.js","sourcesContent":["import { INVALID_MOVE } from 'boardgame.io/core';\n\nvar DEFAULT_TROOP_DECK = [];\nvar TROOP_DECK_COLORS = [\"r\",\"o\",\"y\",\"g\",\"b\",\"p\"];\nvar TROOP_DECK_VALUES = [\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"T\"];\nvar VALUE_MAP = new Map([[\"1\",1],[\"2\",2],[\"3\",3],[\"4\",4],[\"5\",5],[\"6\",6],[\"7\",7],[\"8\",8],[\"9\",9],[\"T\",10]]);\nvar FORMATION_STRENGTH_MAP = new Map([[\"straightflush\",5],[\"set\",4],[\"flush\",3],[\"straight\",2],[\"sum\",1],[\"incomplete\",0]]);\n\nfor(let i = 0; i !== 10; i++){\n  for(let j = 0; j !== 6; j++){\n    var card = TROOP_DECK_VALUES[i]+TROOP_DECK_COLORS[j];\n    DEFAULT_TROOP_DECK.push(card);\n  }\n}\n\nvar troop_deck = DEFAULT_TROOP_DECK.slice();\nshuffle_array(troop_deck);\n\nvar DEFAULT_TACTICS_DECK = [\"ALX\",\"DAR\",\"CAV\",\"321\",\"TRA\",\"DES\",\"RDP\",\"SCT\",\"FOG\",\"MUD\"];\nvar tactics_deck = DEFAULT_TACTICS_DECK.slice();\nshuffle_array(tactics_deck);\n\nvar player_hands = [];\nplayer_hands.push([]);\nplayer_hands.push([]);\n\nfor(let i = 0; i !== 7; i++){\n  for(let j = 0; j !== 2; j++){\n    player_hands[j].push(troop_deck.pop()); \n  }\n}\n\nvar board_cards = new Array(9).fill(new Array(2).fill([]))\nvar unseen_cards = DEFAULT_TROOP_DECK.slice();\n\nvar flag_statuses = new Array(9).fill(null);\n\nexport const BattleLine = {\n  name: \"battle-line\",\n  setup: () => ({ troop_deck: troop_deck,\n                  tactics_deck: tactics_deck,\n                  player_hands: player_hands,\n                  board_cards: board_cards,\n                  unseen_cards: unseen_cards,\n                  flag_statuses: flag_statuses\n                }),\n  minPlayers: 2,\n  maxPlayers: 2,\n  moves: {\n    playCard: (G, ctx, card, flag) => {\n      if (ctx.numMoves > 0){\n        return INVALID_MOVE;\n      }\n      if (G.board_cards[flag][ctx.currentPlayer].length === 3){\n        return INVALID_MOVE;\n      }\n      if (G.flag_statuses[flag] !== null){\n        return INVALID_MOVE;\n      }\n      G.board_cards[flag][ctx.currentPlayer].push(G.player_hands[ctx.currentPlayer][card]);\n      var ind = G.unseen_cards.indexOf(G.player_hands[ctx.currentPlayer][card]);\n      if (ind !== -1){\n        G.unseen_cards.splice(ind,1);\n      }\n      G.player_hands[ctx.currentPlayer].splice(card, 1);\n    },\n    claimFlag: (G, ctx, flag) => {\n      if (ctx.numMoves === 0){\n        return INVALID_MOVE;\n      }\n      if (G.flag_statuses[flag] !== null){\n        return INVALID_MOVE;\n      }\n      var formations = getFormations(flag, ctx.currentPlayer, G.board_cards);\n      if (!isStrongestFormation(formations[0], formations[1], G.unseen_cards)){\n        return INVALID_MOVE;\n      }\n      G.flag_statuses[flag] = ctx.currentPlayer;\n    },\n    drawCard: {\n      move: (G, ctx, deck) => {\n        if (ctx.numMoves === 0){\n          return INVALID_MOVE;\n        }\n        if (G.troop_deck.length > 0){\n          G.player_hands[ctx.currentPlayer].push(G.troop_deck.pop());\n        }\n        ctx.events.endTurn();\n      },\n      client: false\n    }\n  },\n  playerView: (G, ctx, playerID) => {return stripSecrets(G, playerID)},\n\n  // },\n  endIf: (G, ctx) => {\n    if (IsVictory(G.flag_statuses, ctx.currentPlayer)) {\n      return { winner: ctx.currentPlayer};\n    }\n  },\n};\n\n// Return true if `cells` is in a winning configuration.\nfunction IsVictory(flag_statuses, player_id) {\n  var count = 0;\n  var count_consecutive = 0;\n  for (let i = 0; i !== 9; i++){\n    if (flag_statuses[i] === player_id){\n      count++;\n      count_consecutive++;\n    }\n    else{\n      count_consecutive = 0;\n    }\n    if (count >= 5 || count_consecutive >= 3){\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getFormations(flag, player_id, board_cards){\n  var formation = [];\n  var formation_opp = [];\n  for(let i = 0; i !== 2; i++){\n    for(let j = 0; j !== board_cards[flag][i].length; j++){\n      if(i === parseInt(player_id)){\n        formation.push(board_cards[flag][i][j]);\n      }\n      else {\n        formation_opp.push(board_cards[flag][i][j]);\n      }\n    }\n  }\n  return [formation, formation_opp];\n}\n\nfunction isStrongestFormation(formation, formation_opp, unseen_cards){\n  var remaining_cards = new Set(DEFAULT_TROOP_DECK);\n  for(let i = 0; i !== 9; i++){\n    for(let j = 0; j !== 2; j++){\n      for(let k = 0; k !== board_cards[i][j].length; k++){\n        remaining_cards.delete(board_cards[i][j][k]);\n      }\n    }\n  }\n  var formation_strength = formationStrength(formation);\n  var formation_strength_opp = potentialFormationStrength(formation_opp, unseen_cards);\n\n  return formationStrengthComparison(formation_strength, formation_strength_opp);\n}\n\nfunction formationStrengthComparison(formation_strength1, formation_strength2){\n  if (FORMATION_STRENGTH_MAP.get(formation_strength1[0]) > FORMATION_STRENGTH_MAP.get(formation_strength2[0])){\n    return true;\n  }\n  else if (FORMATION_STRENGTH_MAP.get(formation_strength1[0]) < FORMATION_STRENGTH_MAP.get(formation_strength2[0])){\n    return false;\n  }\n  else if (formation_strength1[1] >= formation_strength2[1]){\n    return true;\n  }\n  else{\n    return false;\n  }\n}\n\nfunction formationStrength(formation){\n  var formation_sum = formationSum(formation);\n  if (formation.length !== 3){\n    return ['incomplete', formation_sum];\n  }\n  var is_flush = isFlush(formation);\n  var is_straight = isStraight(formation);\n  var is_set = isSet(formation);\n  if (is_flush && is_straight){\n    return ['straightflush', formation_sum];\n  }\n  else if (is_set){\n    return ['set', formation_sum];\n  }\n  else if (is_flush){\n    return ['flush', formation_sum];\n  }\n  else if (is_straight){\n    return ['straight', formation_sum];\n  }\n  else{\n    return ['sum', formation_sum];\n  }\n}\n\nfunction formationSum(formation){\n  var sum = 0;\n  for (let i = 0; i !== formation.length; i++){\n    sum += VALUE_MAP.get(formation[i][0]);\n  }\n  return sum;\n}\n\nfunction isFlush(formation){\n  var color = null;\n  for (let i = 0; i !== formation.length; i++){\n    if (color === null){\n      color = formation[i][1];\n    }\n    else if(color !== formation[i][1]){\n      return false;\n    }\n  }\n  return true;\n}\nfunction isStraight(formation){\n  for (let i = 0; i !== formation.length; i++){\n    for (let j = i+1; j !== formation.length; j++){\n      var diff = Math.abs(VALUE_MAP.get(formation[i][0]) - VALUE_MAP.get(formation[j][0]));\n      if (diff === 0 || diff >= 3){\n        return false;\n      }  \n    }\n  }\n  return true;\n}\nfunction isSet(formation){\n  var value = null;\n  for (let i = 0; i !== formation.length; i++){\n    if (value === null){\n      value = formation[i][0];\n    }\n    else if(value !== formation[i][0]){\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction potentialFormationStrength(formation, unseen_cards){\n  let pot = potentialStraightFlush(formation, unseen_cards);\n  if (pot !== -1){\n    return ['straightflush', pot];\n  }\n  pot = potentialSet(formation, unseen_cards);\n  if (pot !== -1){\n    return ['set', pot];\n  }\n  pot = potentialFlush(formation, unseen_cards);\n  if (pot !== -1){\n    return ['flush', pot];\n  }\n  pot = potentialStraight(formation, unseen_cards);\n  if (pot !== -1){\n    return ['straight', pot];\n  }\n  pot = potentialSum(formation, unseen_cards);\n  if (pot !== -1){\n    return ['sum', pot];\n  }\n  return ['incomplete', pot];\n}\n\nfunction potentialStraightFlush(formation, unseen_cards, ind = null){\n  if (ind === null){\n    ind = unseen_cards.length;\n  }\n  if (!(isFlush(formation) && isStraight(formation))){\n    return -1;\n  }\n  if (formation.length === 3){\n    return formationSum(formation);\n  }\n  for(let i = ind - 1; i >= 0; i--){\n    var formation_new = formation.slice();\n    var unseen_cards_new = unseen_cards.slice();\n    formation_new.push(unseen_cards[i]);\n    unseen_cards_new.splice(i, 1);\n    var pot = potentialStraightFlush(formation_new, unseen_cards_new, i);\n    if (pot !== -1){\n      return pot;\n    }\n  }\n  return -1;\n}\nfunction potentialSet(formation, unseen_cards, ind = null){\n  if (ind === null){\n    ind = unseen_cards.length;\n  }\n  if (!isSet(formation)){\n    return -1;\n  }\n  if (formation.length === 3){\n    return formationSum(formation);\n  }\n  for(let i = ind - 1; i >= 0; i--){\n    var formation_new = formation.slice();\n    var unseen_cards_new = unseen_cards.slice();\n    formation_new.push(unseen_cards[i]);\n    unseen_cards_new.splice(i, 1);\n    var pot = potentialSet(formation_new, unseen_cards_new, i);\n    if (pot !== -1){\n      return pot;\n    }\n  }\n  return -1;\n}\nfunction potentialFlush(formation, unseen_cards, ind = null){\n  if (ind === null){\n    ind = unseen_cards.length;\n  }\n  if (!isFlush(formation)){\n    return -1;\n  }\n  if (formation.length === 3){\n    return formationSum(formation);\n  }\n  for(let i = ind - 1; i >= 0; i--){\n    var formation_new = formation.slice();\n    var unseen_cards_new = unseen_cards.slice();\n    formation_new.push(unseen_cards[i]);\n    unseen_cards_new.splice(i, 1);\n    var pot = potentialFlush(formation_new, unseen_cards_new, i);\n    if (pot !== -1){\n      return pot;\n    }\n  }\n  return -1;\n}\nfunction potentialStraight(formation, unseen_cards, ind = null){\n  if (ind === null){\n    ind = unseen_cards.length;\n  }\n  if (!isStraight(formation)){\n    return -1;\n  }\n  if (formation.length === 3){\n    return formationSum(formation);\n  }\n  for(let i = ind - 1; i >= 0; i--){\n    var formation_new = formation.slice();\n    var unseen_cards_new = unseen_cards.slice();\n    formation_new.push(unseen_cards[i]);\n    unseen_cards_new.splice(i, 1);\n    var pot = potentialStraight(formation_new, unseen_cards_new, i);\n    if (pot !== -1){\n      return pot;\n    }\n  }\n  return -1;\n}\nfunction potentialSum(formation, unseen_cards, ind = null){\n  if (ind === null){\n    ind = unseen_cards.length;\n  }\n  if (formation.length === 3){\n    return formationSum(formation);\n  }\n  for(let i = ind - 1; i >= 0; i--){\n    var formation_new = formation.slice();\n    var unseen_cards_new = unseen_cards.slice();\n    formation_new.push(unseen_cards[i]);\n    unseen_cards_new.splice(i, 1);\n    var pot = potentialSum(formation_new, unseen_cards_new, i);\n    if (pot !== -1){\n      return pot;\n    }\n  }\n  return -1;\n}\n\nfunction shuffle_array(arr){\n  for(let i = arr.length-1; i >= 0; i--){\n    var k = Math.floor(Math.random()*(i+1));\n    var temp = arr[k];\n    arr[k] = arr[i];\n    arr[i] = temp;\n  }\n}\n\nfunction stripSecrets(G, playerID){\n  var troop_deck_stripped = new Array(G.troop_deck.length).fill(\"troop\");\n  var tactics_deck_stripped = new Array(G.tactics_deck.length).fill(\"tactics\");\n  var player_hands_stripped = [];\n  for (let i = 0; i !== 2; i++){\n    if(parseInt(playerID) === i){\n      player_hands_stripped.push(G.player_hands[i]);\n    }\n    else{\n      var opp_hand_stripped = [];\n      for (let j = 0; j !== G.player_hands[i].length; j++){\n        opp_hand_stripped.push('troop');\n      }\n      player_hands_stripped.push(opp_hand_stripped);\n    }\n  }\n\n  var G_stripped = {troop_deck: troop_deck_stripped,\n                    tactics_deck: tactics_deck_stripped,\n                    player_hands: player_hands_stripped,\n                    board_cards: G.board_cards,\n                    unseen_cards: G.unseen_cards,\n                    flag_statuses: G.flag_statuses};\n  return G_stripped;\n}","import React from 'react';\n\n// function rect(props) {\n//     const {ctx, x, y, width, height} = props;\n//     ctx.fillRect(x, y, width, height);\n// }\nvar COLOR_MAP = new Map([[\"r\",\"#FF0000\"],[\"o\",\"#FFA500\"],[\"y\",\"#FFFF00\"],[\"g\",\"#008000\"],[\"b\",\"#0000FF\"],[\"p\",\"#800080\"]]);\n\nexport class Card extends React.Component {\n    componentDidMount() {\n        this.updateCanvas();\n    }\n    componentDidUpdate() {\n        this.updateCanvas();\n    }\n    updateCanvas() {    \n        const ctx = this.refs.canvas.getContext('2d');\n        ctx.clearRect(0,0, 80, 120);\n        if (this.props.str.length == 2){\n            drawTroopCardFront(ctx, this.props.str);\n        }\n        else if (this.props.str == 'troop'){\n            drawTroopCardBack(ctx);\n        }\n    }\n\n    render() {\n         return (\n             <canvas ref=\"canvas\" width={80} height={120}/>\n         );\n    }\n}\n\nexport class Formation extends React.Component {\n    componentDidMount() {\n        this.updateCanvas();\n    }\n    componentDidUpdate() {\n        this.updateCanvas();\n    }\n    updateCanvas() {    \n        const ctx = this.refs.canvas.getContext('2d');\n        ctx.clearRect(0,0, 80, 190);\n        if (this.props.side === 'top'){\n            ctx.translate(0,70);\n            for (let i = 0; i != this.props.cards.length; i++){\n                drawTroopCardFront(ctx, this.props.cards[i]);\n                ctx.translate(0,-35);\n            }\n            ctx.translate(0,-35*(2-this.props.cards.length))\n        }\n        else{\n            for (let i = 0; i != this.props.cards.length; i++){\n                drawTroopCardFront(ctx, this.props.cards[i]);\n                ctx.translate(0,35);\n            }\n            ctx.translate(0,-35*this.props.cards.length)\n        }\n        if (this.props.show_flag){\n            let y_offset = this.props.side === 'top' ? 35:105;\n            drawFlag(ctx, y_offset);\n        }\n        \n    }\n\n    render() {\n         return (\n             <canvas ref=\"canvas\" width={80} height={190}/>\n         );\n    }   \n}\n\nexport class Flag extends React.Component {\n    componentDidMount() {\n        this.updateCanvas();\n    }\n    componentDidUpdate() {\n        this.updateCanvas();\n    }\n    updateCanvas() {    \n        const ctx = this.refs.canvas.getContext('2d');\n        ctx.clearRect(0,0, 80, 50);\n        if (this.props.show_flag){\n            drawFlag(ctx, 0);\n        }\n    }\n    render() {\n         return (\n             <canvas ref=\"canvas\" width={80} height={50}/>\n         );\n    }   \n}\n\nfunction drawTroopCardFront(ctx, card_str){\n    let card_width = 80;\n    let card_height = 120;\n    let padding = 7;\n    let inset_width = 20;\n    let inset_height = 25;\n    let val = card_str[0];\n    let color = card_str[1];\n\n    drawCardOutline(ctx, card_width, card_height, 7, \"#FFFFFF\");\n    ctx.fillStyle = COLOR_MAP.get(color);\n    ctx.fillRect(padding, padding, card_width-2*padding, card_height-2*padding);\n    ctx.fillStyle = \"#FFFFFF\";\n    ctx.fillRect(padding, padding, inset_width, inset_height);\n    ctx.fillRect(card_width-padding-inset_width, card_height-padding-inset_height, inset_width, inset_height);\n    ctx.font = \"18px Verdana\";\n    ctx.fillStyle = \"#000000\";\n    ctx.textAlign = \"center\";\n    let lineHeight = ctx.measureText('M').width;\n    for (let i = 0; i != 2; i++){\n        if (val !== 'T'){\n            ctx.fillText(val, padding + inset_width/2, padding + inset_height/2 + lineHeight/2 - 2); \n        }\n        else{\n            let reduce_spacing = 4;\n            let width_1 = ctx.measureText('1').width;\n            let width_0 = ctx.measureText('0').width;\n\n            ctx.fillText('1', padding + inset_width/2 - width_1/2 + reduce_spacing/2, padding + inset_height/2 + lineHeight/2 - 2); \n            ctx.fillText('0', padding + inset_width/2 + width_0/2 - reduce_spacing/2, padding + inset_height/2 + lineHeight/2 - 2);\n        }\n        if (val === '6' || val === '9'){\n            let width = ctx.measureText(val).width;\n            ctx.lineWidth = 1;\n            ctx.beginPath();\n            ctx.moveTo(padding + inset_width/2 - width/2, padding + inset_height/2 + lineHeight/2 + 1);\n            ctx.lineTo(padding + inset_width/2 + width/2, padding + inset_height/2 + lineHeight/2 + 1);\n            ctx.stroke();\n        }\n        ctx.rotate(Math.PI);\n        ctx.translate(-card_width, -card_height);\n    }\n}\n\nfunction drawTroopCardBack(ctx){\n    let card_width = 80;\n    let card_height = 120;\n    let padding = 7;\n\n    drawCardOutline(ctx, card_width, card_height, 7, \"#000000\");\n    ctx.fillStyle = \"#D2B48C\";\n    ctx.fillRect(padding, padding, card_width-2*padding, card_height-2*padding);\n\n    ctx.font = \"16px Verdana\";\n    ctx.fillStyle = \"#000000\";\n    ctx.textAlign = \"center\";\n    ctx.fillText('TROOP', card_width/2, card_height/2)\n}\n\nfunction drawCardOutline(ctx, width, height, corner_radius, fill_color){\n    ctx.strokeStyle = \"#000000\";\n    ctx.fillStyle = fill_color;\n    let lineWidth = 2;\n    ctx.lineWidth = lineWidth;\n    ctx.beginPath();\n    ctx.moveTo(corner_radius+lineWidth/2, lineWidth/2);\n    ctx.lineTo(width-corner_radius-lineWidth/2, lineWidth/2);\n    ctx.arcTo(width-lineWidth/2, lineWidth/2, width-lineWidth/2, corner_radius+lineWidth/2, corner_radius+lineWidth/2);\n    ctx.lineTo(width-lineWidth/2, height-corner_radius-lineWidth/2);\n    ctx.arcTo(width-lineWidth/2, height-lineWidth/2, width-corner_radius-lineWidth/2, height-lineWidth/2, corner_radius+lineWidth/2);\n    ctx.lineTo(corner_radius+lineWidth/2, height-lineWidth/2);\n    ctx.arcTo(lineWidth/2, height-lineWidth/2, lineWidth/2, corner_radius+lineWidth/2, corner_radius+lineWidth/2);\n    ctx.lineTo(lineWidth/2, corner_radius+lineWidth/2);\n    ctx.arcTo(lineWidth/2, lineWidth/2, corner_radius+lineWidth/2, lineWidth/2, corner_radius+lineWidth/2);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n}\n\nfunction drawFlag(ctx, y_offset){\n    var img = document.getElementById(\"flag\");\n    ctx.drawImage(img, 15, y_offset, 50, 50);\n\n}","import React from 'react';\nimport {Card, Formation, Flag} from './BoardComponents'\n\nexport class BattleLineBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.selected_card = null;\n  }\n  onClickCard(player_id, card_id) {\n    if (this.props.ctx.currentPlayer !== player_id){\n      return;\n    }\n    this.selected_card = card_id;\n  }\n  onClickSlot(player_id, flag_id) {\n    if (this.props.ctx.currentPlayer !== player_id){\n      return;\n    }\n    if (this.selected_card === null){\n      return;\n    }\n    this.props.moves.playCard(this.selected_card, flag_id);\n    this.selected_card = null;\n  }\n  onClickFlag(flag_id){\n    this.props.moves.claimFlag(flag_id); \n  }\n  onClickDeck(deck_id){\n    this.props.moves.drawCard(deck_id); \n  }\n  render() {\n    let tbody = [];\n\n    let cells = [];\n    cells.push(\n        <td key ={cells.length} style={{textAlign: 'center'}}>\n          {this.props.ctx.currentPlayer === '0' ? 'Your turn!': ''}\n        </td>\n    );\n    for (let i = 0; i < this.props.G.player_hands[0].length; i++) {\n      cells.push(\n        <td key={cells.length} onClick={() => this.onClickCard('0', i)}>\n          <Card str={this.props.G.player_hands[0][i]}/>\n        </td>\n      );\n    }\n    tbody.push(<tr key={tbody.length}>{cells}</tr>);\n    cells = [];\n    cells.push(\n      <td rowSpan=\"3\" key={cells.length}>\n        <table id=\"troop_deck\" style={{margin:'auto'}}>\n          <tbody>\n            <tr>\n              <td onClick={() => this.onClickDeck(0)}>\n                <Card str={this.props.G.troop_deck.length>0 ? this.props.G.troop_deck[0]:''}/>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </td>\n    );\n    for (let i = 0; i < 9; i++) {\n      let str = this.props.G.board_cards[i][0].join('\\n');\n      cells.push(\n        <td key={cells.length} onClick={() => this.onClickSlot('0', i)}>\n          <Formation cards={this.props.G.board_cards[i][0]} side={'top'} show_flag={this.props.G.flag_statuses[i]==='0'}/>\n        </td>\n      );\n    }\n    tbody.push(<tr key={tbody.length}>{cells}</tr>);\n    cells = [];\n\n    for (let i = 0; i < 9; i++) {\n      cells.push(\n        <td key={cells.length} onClick={() => this.onClickFlag(i)}>\n          <Flag show_flag={this.props.G.flag_statuses[i]===null}/>\n        </td>\n      );\n    }\n    tbody.push(<tr key={tbody.length}>{cells}</tr>);\n    cells = [];\n\n    for (let i = 0; i < 9; i++) {\n      let str = this.props.G.board_cards[i][1].join('\\n');\n      cells.push(\n        <td key={cells.length} onClick={() => this.onClickSlot('1',i)}>\n          <Formation cards={this.props.G.board_cards[i][1]} side={'bottom'} show_flag={this.props.G.flag_statuses[i]==='1'}/>\n        </td>\n      );\n    }\n    tbody.push(<tr key={tbody.length}>{cells}</tr>);\n    cells = [];\n    cells.push(\n        <td key={cells.length} style={{textAlign: 'center'}}>\n          {this.props.ctx.currentPlayer === '1' ? 'Your turn!': ''}\n        </td>\n    );\n    for (let i = 0; i < this.props.G.player_hands[1].length; i++) {\n      cells.push(\n        <td key={cells.length} onClick={() => this.onClickCard('1',i)}>\n          <Card str={this.props.G.player_hands[1][i]}/>\n        </td>\n      );\n    }\n    tbody.push(<tr key={tbody.length}>{cells}</tr>);\n    return (\n      <div>\n        <table id=\"board\">\n          <tbody>{tbody}</tbody>\n        </table>\n      </div>\n    );\n  }\n}","import React from 'react';\nimport { Lobby } from 'boardgame.io/react';\n\nexport class BattleLineLobby extends Lobby{\n    handleChangeName(event){\n        this.setState({\n            playerName: event.target.value,\n        });\n    }\n    handleNewRoom(event){\n        this._createRoom('battle-line', 2);\n    }\n    handleRefreshRooms(event){\n        this._updateConnection();\n    }\n    handleJoinRoom(event, gameID, playerID){\n        this._joinRoom('battle-line', gameID, playerID);\n    }\n    handleLeaveRoom(event, gameID){\n        this._leaveRoom('battle-line', gameID);\n    }\n    handleEnterLobby(event){\n        this._enterLobby(this.state.playerName);\n    }\n    handleExitLobby(event){\n        this._exitLobby();\n    }\n    handleStartGame(event, gameID, playerID){\n        this._startGame('battle-line', {numPlayers: 2, gameID: gameID, playerID: playerID});\n    }\n    handleExitRoom(event){\n        this._exitRoom();\n    }\n    render(){\n        var rooms_thead = [];\n        var rooms_th = [];\n\n        const room_id_col_style = {\n            width:\"150px\",\n            textAlign: 'center',\n            padding: '3px'\n        }\n        const player_name_col_style = {\n            width:\"150px\",\n            textAlign: 'center',\n            padding: '3px'\n        }\n        const vs_col_style = {\n            width:\"30px\",\n            textAlign: 'center',\n            padding: '3px'\n        }\n        const button_col_style = {\n            width:\"100px\",\n            textAlign: 'center',\n            padding: '3px'\n        }\n\n        rooms_th.push(<th style={room_id_col_style}>{'Room ID'}</th>);\n        rooms_th.push(<th style={player_name_col_style}>{'Player 1'}</th>);\n        rooms_th.push(<th style={vs_col_style}>{'vs.'}</th>);\n        rooms_th.push(<th style={player_name_col_style}>{'Player 2'}</th>);\n        rooms_th.push(<th style={button_col_style}><input type=\"button\" value=\"New Room\" onClick={(event) => this.handleNewRoom(event)}/></th>);\n        rooms_th.push(<th style={button_col_style}><input type=\"button\" value=\"Refresh\" onClick={(event) => this.handleRefreshRooms(event)}/></th>);\n        rooms_thead.push(<tr>{rooms_th}</tr>);\n\n        var rooms_tbody = [];\n        for (var i = 0; i !== this.connection.rooms.length; i++){\n            var rooms_row = [];\n            let room = this.connection.rooms[i];\n            var player1_name = (room.players.length > 0) ? room.players[0].name:undefined;\n            var player2_name = (room.players.length > 1) ? room.players[1].name:undefined;\n\n            rooms_row.push(<td style={room_id_col_style}>{room.gameID}</td>);\n            if (player1_name !== undefined){\n                rooms_row.push(<td style={player_name_col_style}>{player1_name}</td>);\n            }\n            else{\n                rooms_row.push(<td style={player_name_col_style}><input type=\"button\" value=\"Join\" onClick={(event) => this.handleJoinRoom(event, room.gameID, 0)}/></td>);\n            }\n            rooms_row.push(<td style={vs_col_style}>{'vs.'}</td>);\n            if (player2_name !== undefined){\n                rooms_row.push(<td style={player_name_col_style}>{player2_name}</td>);\n            }\n            else{\n                rooms_row.push(<td style={player_name_col_style}><input type=\"button\" value=\"Join\" onClick={(event) => this.handleJoinRoom(event, room.gameID, 1)}/></td>);\n            }    \n\n            if (player1_name === this.state.playerName || player2_name === this.state.playerName){\n                rooms_row.push(<td style={button_col_style}><input type=\"button\" value=\"Leave\" onClick={(event) => this.handleLeaveRoom(event, room.gameID)}/></td>);\n            }\n            else{\n                rooms_row.push(<td style={button_col_style}></td>);\n            }\n            if((player1_name === this.state.playerName && player2_name !== undefined) || (player2_name === this.state.playerName && player1_name !== undefined)){\n                let playerID = this.state.playerName === player1_name ? '0':'1';\n                rooms_row.push(<td style={button_col_style}><input type=\"button\" value=\"Play\" onClick={(event) => this.handleStartGame(event, room.gameID, playerID)}/></td>);\n            }\n            else{\n                rooms_row.push(<td style={button_col_style}></td>);\n            }\n            rooms_tbody.push(<tr>{rooms_row}</tr>);\n        }\n\n        // var errMsg = this.state.errorMsg !== '' ? 'Error: ' + this.state.errorMsg:'';\n\n        if (this.state.phase === 'enter'){\n            return (\n                <div>\n                    {'Enter name: '}\n                    <input type=\"text\" value={this.state.playerName} onChange={(event) => this.handleChangeName(event)}/>\n                    <input type=\"button\" value=\"Enter Lobby\" onClick={(event) => this.handleEnterLobby(event)}/>\n                </div>\n            );\n        }\n        else if (this.state.phase === 'list'){\n            return (\n                <div>\n                    <input type=\"button\" value=\"Exit Lobby\" onClick={(event) => this.handleExitLobby(event)}/>\n                    <br></br>\n                    <table id=\"rooms\">\n                        <thead>\n                            {rooms_thead}\n                        </thead>\n                        <tbody>\n                            {rooms_tbody}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n        else if (this.state.phase === 'play'){\n            var board_element = React.createElement(this.state.runningGame.app, {\n                gameID: this.state.runningGame.gameID,\n                playerID: this.state.runningGame.playerID,\n                credentials: this.state.runningGame.credentials\n            });\n            return (\n                <div>\n                    {board_element}\n                    <br></br>\n                    <input type=\"button\" value=\"Exit Game\" onClick={(event) => this.handleExitRoom(event)}/>\n                </div>\n            );\n        }\n\n    }\n}","import React from 'react';\nimport { Client } from 'boardgame.io/react';\nimport { SocketIO } from 'boardgame.io/multiplayer';\nimport { BattleLine } from './Game';\nimport { BattleLineBoard } from './Board';\nimport { BattleLineLobby } from './Lobby';\n\nconst BattleLineClient = Client({\n  game: BattleLine,\n  board: BattleLineBoard,\n  // ONLINE:\n  multiplayer: SocketIO({ server: 'https://battleline-backend.herokuapp.com' }),\n  // LOCAL:\n  // multiplayer: SocketIO({ server: 'localhost:8000' }),\n  // END\n});\n\n// ONLINE:\nconst App = () => (\n  <div>\n    <BattleLineLobby\n    gameServer={'https://battleline-backend.herokuapp.com'}\n    lobbyServer={'https://battleline-backend.herokuapp.com'}\n    gameComponents={[{game: BattleLine, board: BattleLineBoard}]}\n    />\n  </div>\n)\n\n// LOCAL:\n// const App = () => (\n//   <div>\n//     <BattleLineClient/>\n//   </div>\n// )\n// END\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}