(this.webpackJsonpbattleline=this.webpackJsonpbattleline||[]).push([[0],{57:function(e,t,n){e.exports=n(99)},62:function(e,t,n){},95:function(e,t){},99:function(e,t,n){"use strict";n.r(t);for(var r=n(2),a=n.n(r),l=n(54),u=n.n(l),i=(n(62),n(20)),o=n(27),s=n(0),c=new Array,h=["r","o","y","g","b","p"],p=["1","2","3","4","5","6","7","8","9","T"],f=new Map([["1",1],["2",2],["3",3],["4",4],["5",5],["6",6],["7",7],["8",8],["9",9],["T",10]]),d=new Map([["straightflush",5],["set",4],["flush",3],["straight",2],["sum",1],["incomplete",0]]),m=0;10!=m;m++)for(var y=0;6!=y;y++){var v=p[m]+h[y];c.push(v)}var g=c.slice();A(g);var b=["ALX","DAR","CAV","321","TRA","DES","RDP","SCT","FOG","MUD"].slice();A(b);var E=new Array;E.push(new Array),E.push(new Array);for(m=0;7!=m;m++)for(y=0;2!=y;y++)E[y].push(g.pop());var k=new Array(9).fill(new Array(2).fill(new Array)),C=c.slice(),_=new Array(9).fill(null),x={name:"battle-line",setup:function(){return{troop_deck:g,tactics_deck:b,player_hands:E,board_cards:k,unseen_cards:C,flag_statuses:_}},minPlayers:2,maxPlayers:2,moves:{playCard:function(e,t,n,r){if(t.numMoves>0)return s.y;if(3==e.board_cards[r][t.currentPlayer].length)return s.y;if(null!=e.flag_statuses[r])return s.y;e.board_cards[r][t.currentPlayer].push(e.player_hands[t.currentPlayer][n]);var a=e.unseen_cards.indexOf(e.player_hands[t.currentPlayer][n]);-1!=a&&e.unseen_cards.splice(a,1),e.player_hands[t.currentPlayer].splice(n,1)},claimFlag:function(e,t,n){if(0==t.numMoves)return s.y;if(null!=e.flag_statuses[n])return s.y;var r=function(e,t,n){for(var r=[],a=[],l=0;2!=l;l++)for(var u=0;u!=n[e][l].length;u++)l==t?r.push(n[e][l][u]):a.push(n[e][l][u]);return[r,a]}(n,t.currentPlayer,e.board_cards);if(!function(e,t,n){for(var r=new Set(c),a=0;9!=a;a++)for(var l=0;2!=l;l++)for(var u=0;u!=k[a][l].length;u++)r.delete(k[a][l][u]);var i=function(e){var t=w(e);if(3!=e.length)return["incomplete",t];var n=R(e),r=P(e),a=D(e);return n&&r?["straightflush",t]:a?["set",t]:n?["flush",t]:r?["straight",t]:["sum",t]}(e),o=function(e,t){var n;if(-1!=(n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=n.length);if(!R(t)||!P(t))return-1;if(3==t.length)return w(t);for(var a=r-1;a>=0;a--){var l=t.slice(),u=n.slice();l.push(n[a]),u.splice(a,1);var i=e(l,u,a);if(-1!=i)return i}return-1}(e,t)))return["straightflush",n];if(-1!=(n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=n.length);if(!D(t))return-1;if(3==t.length)return w(t);for(var a=r-1;a>=0;a--){var l=t.slice(),u=n.slice();l.push(n[a]),u.splice(a,1);var i=e(l,u,a);if(-1!=i)return i}return-1}(e,t)))return["set",n];if(-1!=(n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=n.length);if(!R(t))return-1;if(3==t.length)return w(t);for(var a=r-1;a>=0;a--){var l=t.slice(),u=n.slice();l.push(n[a]),u.splice(a,1);var i=e(l,u,a);if(-1!=i)return i}return-1}(e,t)))return["flush",n];if(-1!=(n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=n.length);if(!P(t))return-1;if(3==t.length)return w(t);for(var a=r-1;a>=0;a--){var l=t.slice(),u=n.slice();l.push(n[a]),u.splice(a,1);var i=e(l,u,a);if(-1!=i)return i}return-1}(e,t)))return["straight",n];if(-1!=(n=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=n.length);if(3==t.length)return w(t);for(var a=r-1;a>=0;a--){var l=t.slice(),u=n.slice();l.push(n[a]),u.splice(a,1);var i=e(l,u,a);if(-1!=i)return i}return-1}(e,t)))return["sum",n];return["incomplete",n]}(t,n);return s=i,h=o,d.get(s[0])>d.get(h[0])||!(d.get(s[0])<d.get(h[0]))&&s[1]>=h[1];var s,h}(r[0],r[1],e.unseen_cards))return s.y;e.flag_statuses[n]=t.currentPlayer},drawCard:function(e,t,n){if(0==t.numMoves)return s.y;e.player_hands[t.currentPlayer].push(g.pop()),t.events.endTurn()}},endIf:function(e,t){if(function(e,t){for(var n=0,r=0,a=0;9!=a;a++)if(e[a]==t?(n++,r++):r=0,n>=5||r>=3)return!0;return!1}(e.flag_statuses,t.currentPlayer))return{winner:t.currentPlayer}}};function w(e){for(var t=0,n=0;n!=e.length;n++)t+=f.get(e[n][0]);return t}function R(e){for(var t=null,n=0;n!=e.length;n++)if(null==t)t=e[n][1];else if(t!=e[n][1])return!1;return!0}function P(e){for(var t=0;t!=e.length;t++)for(var n=t+1;n!=e.length;n++){var r=Math.abs(f.get(e[t][0])-f.get(e[n][0]));if(0==r||r>=3)return!1}return!0}function D(e){for(var t=null,n=0;n!=e.length;n++)if(null==t)t=e[n][0];else if(t!=e[n][0])return!1;return!0}function A(e){for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}}var G=n(4),I=n(6),j=n(10),N=n(9),L=function(e){Object(j.a)(n,e);var t=Object(N.a)(n);function n(e){var r;return Object(G.a)(this,n),(r=t.call(this,e)).selected_card=null,r}return Object(I.a)(n,[{key:"onClickCard",value:function(e,t){this.props.ctx.currentPlayer==e&&(this.selected_card=t)}},{key:"onClickSlot",value:function(e,t){this.props.ctx.currentPlayer==e&&null!=this.selected_card&&(this.props.moves.playCard(this.selected_card,t),this.selected_card=null)}},{key:"onClickFlag",value:function(e){this.props.moves.claimFlag(e)}},{key:"onClickDeck",value:function(e){this.props.moves.drawCard(e)}},{key:"render",value:function(){var e=this,t={border:"1px solid #555",width:"100px",height:"150px",lineHeight:"150px",textAlign:"center"},n=[],r=[];r.push(a.a.createElement("td",{style:t},0==this.props.ctx.currentPlayer?"X":""));for(var l=function(n){var l=n;r.push(a.a.createElement("td",{style:t,key:l,onClick:function(){return e.onClickCard(0,n)}},e.props.G.player_hands[0][n]))},u=0;u<this.props.G.player_hands[0].length;u++)l(u);n.push(a.a.createElement("tr",{key:0},r)),(r=[]).push(a.a.createElement("td",{style:t}));for(var i=function(n){var l=10+n,u=e.props.G.board_cards[n][0].join("\n");r.push(a.a.createElement("td",{style:t,key:l,onClick:function(){return e.onClickSlot(0,n)}},u))},o=0;o<9;o++)i(o);n.push(a.a.createElement("tr",{key:1},r)),(r=[]).push(a.a.createElement("td",{style:t,key:19,onClick:function(){return e.onClickDeck(0)}},"Troop"));for(var s=function(n){var l=20+n;r.push(a.a.createElement("td",{style:t,key:l,onClick:function(){return e.onClickFlag(n)}},e.props.G.flag_statuses[n]))},c=0;c<9;c++)s(c);n.push(a.a.createElement("tr",{key:2},r)),(r=[]).push(a.a.createElement("td",{style:t}));for(var h=function(n){var l=30+n,u=e.props.G.board_cards[n][1].join("\n");r.push(a.a.createElement("td",{style:t,key:l,onClick:function(){return e.onClickSlot(1,n)}},u))},p=0;p<9;p++)h(p);n.push(a.a.createElement("tr",{key:3},r)),(r=[]).push(a.a.createElement("td",{style:t},1==this.props.ctx.currentPlayer?"X":""));for(var f=function(n){var l=40+n;r.push(a.a.createElement("td",{style:t,key:l,onClick:function(){return e.onClickCard(1,n)}},e.props.G.player_hands[1][n]))},d=0;d<this.props.G.player_hands[1].length;d++)f(d);return n.push(a.a.createElement("tr",{key:4},r)),a.a.createElement("div",null,a.a.createElement("table",{id:"board"},a.a.createElement("tbody",null,n)))}}]),n}(a.a.Component),M=function(e){Object(j.a)(n,e);var t=Object(N.a)(n);function n(e){return Object(G.a)(this,n),t.call(this,e)}return Object(I.a)(n,[{key:"handleChangeName",value:function(e){this.setState({playerName:e.target.value})}},{key:"handleNewRoom",value:function(e){this._createRoom("battle-line",2)}},{key:"handleRefreshRooms",value:function(e){this._updateConnection()}},{key:"handleJoinRoom",value:function(e,t,n){this._joinRoom("battle-line",t,n)}},{key:"handleLeaveRoom",value:function(e,t){this._leaveRoom("battle-line",t)}},{key:"handleEnterLobby",value:function(e){this._enterLobby(this.state.playerName)}},{key:"handleExitLobby",value:function(e){this._exitLobby()}},{key:"handleStartGame",value:function(e,t,n){this._startGame("battle-line",{numPlayers:2,gameID:t,playerID:n})}},{key:"handleExitRoom",value:function(e){this._exitRoom()}},{key:"render",value:function(){var e=this,t=[],n=[],r={width:"150px",textAlign:"center",padding:"3px"},l={width:"150px",textAlign:"center",padding:"3px"},u={width:"30px",textAlign:"center",padding:"3px"},i={width:"100px",textAlign:"center",padding:"3px"};n.push(a.a.createElement("th",{style:r},"Room ID")),n.push(a.a.createElement("th",{style:l},"Player 1")),n.push(a.a.createElement("th",{style:u},"vs.")),n.push(a.a.createElement("th",{style:l},"Player 2")),n.push(a.a.createElement("th",{style:i},a.a.createElement("input",{type:"button",value:"New Room",onClick:function(t){return e.handleNewRoom(t)}}))),n.push(a.a.createElement("th",{style:i},a.a.createElement("input",{type:"button",value:"Refresh",onClick:function(t){return e.handleRefreshRooms(t)}}))),t.push(a.a.createElement("tr",null,n));for(var o=[],s=function(){h=[];var t=e.connection.rooms[c];p=t.players.length>0?t.players[0].name:void 0,f=t.players.length>1?t.players[1].name:void 0,h.push(a.a.createElement("td",{style:r},t.gameID)),void 0!=p?h.push(a.a.createElement("td",{style:l},p)):h.push(a.a.createElement("td",{style:l},a.a.createElement("input",{type:"button",value:"Join",onClick:function(n){return e.handleJoinRoom(n,t.gameID,0)}}))),h.push(a.a.createElement("td",{style:u},"vs.")),void 0!=f?h.push(a.a.createElement("td",{style:l},f)):h.push(a.a.createElement("td",{style:l},a.a.createElement("input",{type:"button",value:"Join",onClick:function(n){return e.handleJoinRoom(n,t.gameID,1)}}))),p==e.state.playerName||f==e.state.playerName?h.push(a.a.createElement("td",{style:i},a.a.createElement("input",{type:"button",value:"Leave",onClick:function(n){return e.handleLeaveRoom(n,t.gameID)}}))):h.push(a.a.createElement("td",{style:i})),p==e.state.playerName&&void 0!=f||f==e.state.playerName&&void 0!=p?(d=e.state.playerName==p?"0":"1",h.push(a.a.createElement("td",{style:i},a.a.createElement("input",{type:"button",value:"Play",onClick:function(n){return e.handleStartGame(n,t.gameID,d)}})))):h.push(a.a.createElement("td",{style:i})),o.push(a.a.createElement("tr",null,h))},c=0;c!=this.connection.rooms.length;c++){var h,p,f,d;s()}""!=this.state.errorMsg&&this.state.errorMsg;if("enter"==this.state.phase)return a.a.createElement("div",null,"Enter name: ",a.a.createElement("input",{type:"text",value:this.state.playerName,onChange:function(t){return e.handleChangeName(t)}}),a.a.createElement("input",{type:"button",value:"Enter Lobby",onClick:function(t){return e.handleEnterLobby(t)}}));if("list"==this.state.phase)return a.a.createElement("div",null,a.a.createElement("input",{type:"button",value:"Exit Lobby",onClick:function(t){return e.handleExitLobby(t)}}),a.a.createElement("br",null),a.a.createElement("table",{id:"rooms"},a.a.createElement("thead",null,t),a.a.createElement("tbody",null,o)));if("play"==this.state.phase){var m=a.a.createElement(this.state.runningGame.app,{gameID:this.state.runningGame.gameID,playerID:this.state.runningGame.playerID,credentials:this.state.runningGame.credentials});return a.a.createElement("div",null,m,a.a.createElement("br",null),a.a.createElement("input",{type:"button",value:"Exit Game",onClick:function(t){return e.handleExitRoom(t)}}))}}}]),n}(i.b),O=(Object(i.a)({game:x,board:L,multiplayer:Object(o.b)({server:"https://battleline-backend.herokuapp.com"})}),function(){return a.a.createElement("div",null,a.a.createElement(M,{gameServer:"https://battleline-backend.herokuapp.com",lobbyServer:"https://battleline-backend.herokuapp.com",gameComponents:[{game:x,board:L}]}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[57,1,2]]]);
//# sourceMappingURL=main.c05919d0.chunk.js.map